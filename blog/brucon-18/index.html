<!DOCTYPE html>
<html><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Offensive Security Engineering &amp; Shenanigans">
    <meta name="Author" content="Rasta Mouse">
    <meta name="keywords" content="offensive security red team pentesting">
    <link rel="stylesheet" href=/rastamouse.me-old_blog/css/syntax.css>
    <link rel="stylesheet" href=/rastamouse.me-old_blog/css/style.css>
    <script src="https://kit.fontawesome.com/1b7478c139.js" crossorigin="anonymous"></script>
    <title>Cheesy Rumbles</title>
  </head><body><aside id="sidenav">
    <header>
    
        <a href=https://rastamouse.me><img src="/rastamouse.me-old_blog/avatar.png" alt="avatar"></a>
        
    

    <a id="branding" href=https://rastamouse.me>
        
            Cheesy Rumbles
        
    </a>
    </header>

    <nav>
        
            		
            <a href="/rastamouse.me-old_blog/"
                
            >
                <i class="fas fa-home fa-sm"></i>
                <span>home</span>
            </a>
        
            		
            <a href="/rastamouse.me-old_blog/blog/"
                
            >
                <i class="fas fa-keyboard fa-ms"></i>
                <span>blog</span>
            </a>
        
            		
            <a href="/rastamouse.me-old_blog/tags"
                
            >
                <i class="fas fa-tags fa-ms"></i>
                <span>tags</span>
            </a>
        
            		
            <a href="https://twitter.com/_RastaMouse"
                
                    target="_blank"
                
            >
                <i class="fab fa-twitter fa-ms"></i>
                <span>twitter</span>
            </a>
        
            		
            <a href="https://github.com/rasta-mouse"
                
                    target="_blank"
                
            >
                <i class="fab fa-github fa-ms"></i>
                <span>github</span>
            </a>
        
            		
            <a href="/rastamouse.me-old_blog/index.xml"
                
            >
                <i class="fas fa-rss fa-ms"></i>
                <span>RSS</span>
            </a>
        
    </nav>
</aside>
<main id="main">
            <a href="javascript:void(0)" id="closebtn" onclick="navToggle()"><i class="fas fa-bars fa-lg"></i></a>
            <div class="content">
    
    <h1 id="title">Review: Active Directory Attacks for Red and Blue Teams</h1>
    
      
    <nav id="TableOfContents"></nav>
    <p>Along with <a href="https://twitter.com/Cneelis">Cn33liz</a>, I recently had the pleasure of assisting <a href="https://twitter.com/nikhil_mitt">Nikhil Mittal</a> with his 2018 BruCON spring training: Active Directory Attacks for Red and Blue Teams.</p>
<p>This 3-day course is aimed towards attacking modern AD environments - focusing on abusing misconfigured enterprise applications like Jenkins; and leveraging native tools such as PowerShell and other trusted OS resources to carry out post-exploitation activities.</p>
<p>Nikhil covers a wide range of topics, including:</p>
<ul>
<li>AD &amp; PowerShell basics</li>
<li>Domain enumeration &amp; mapping
<ul>
<li>PowerView</li>
<li>BloodHound</li>
</ul>
</li>
<li>Privilege Escalation
<ul>
<li>PowerUp</li>
<li>Jenkins</li>
<li>Credential theft (Mimikatz)</li>
</ul>
</li>
<li>Kerberos Attacks
<ul>
<li>Golden &amp; Silver tickets</li>
<li>Kerberoasting</li>
<li>Kerberos Pre-Auth</li>
<li>Delegation</li>
</ul>
</li>
<li>Domain &amp; Forest trusts
<ul>
<li>Child -&gt; Parent</li>
<li>X-Forest</li>
</ul>
</li>
<li>MSSQL Server Database links</li>
<li>Credential abuse
<ul>
<li>PTH &amp; Over-PTH</li>
<li>Token Manipulation</li>
</ul>
</li>
<li>Persistence
<ul>
<li>Skeleton Keys</li>
<li>DCShadow</li>
<li>Directory Services Restore Mode</li>
<li>Security Support Provider</li>
<li>AdminSDHolder</li>
<li>ACLs &amp; Security Descriptors</li>
</ul>
</li>
<li>Bypassing Defence
<ul>
<li>AppLocker</li>
<li>ATA</li>
</ul>
</li>
</ul>
<p>The course material is a combination of lecture, demos and hands-on exercises.  For the majority of topics we cover the theory, show a demo, then allow the students some time to try it out in the lab.  The lab is a large, multi-forest environment which is full of the vulnerabilities discussed in the class.  Each student receives a VPN key and credentials to their own instance of Windows 10, from which to launch their attacks on the forest.</p>
<p>Some areas of the lab are secured a little more than others - e.g. Applocker, just to introduce a bit of challenge and variety :)</p>
<p>The course covers a lot of material and consequently, a number of students may find they need more time with the hands-on to wrap their head around the various subjects.  Unfortunately in order to keep to schedule, we sometimes just have to move on.  The saving grace, is that every student is allowed to retain:</p>
<ul>
<li>All the course materials, including slides and lab handouts.</li>
<li>VPN access to the lab for 1 month after the course.</li>
</ul>
<p>So this gives each student plenty of time to re-visit any and all exercises they wish.</p>
<p>In terms of balance, the content is delivered more from the red perspective than blue.  If you&rsquo;re on the offensive side, you&rsquo;ll (hopefully) pick up a bunch of new tricks for your engagements and gain some understanding of the artefacts and logs you leave behind.  Defenders will gain a deeper understanding of how the red guys are operating and methods of detecting their activity.</p>
<p>If you have the opportunity to attend the course, I would highly recommend it.</p>
    
    <div class="nav-next-prev">
        <div class="nav-prev">
            
                <a href="/rastamouse.me-old_blog/blog/view-of-persistence/"><i class="fas fa-chevron-left"></i></a>
            
        </div>
        <a class="nav-top" href="#">top</i></a>
        <div class="nav-next">
            
                <a href="/rastamouse.me-old_blog/blog/xsl/"><i class="fas fa-chevron-right"></i></a>
            
        </div>
    </div>
    

            </div><footer>
<div class="footer-content">


<p class="copyright meta">This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.</p>

</div>
</footer></main>
    </body>
    <script src=/rastamouse.me-old_blog/js/navbutton.js></script>
</html>
